(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[936],{5575:function(e,t,r){Promise.resolve().then(r.bind(r,3375))},7258:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(7437),a=r(1169);function i(){let e=(0,a.useRouter)();return(0,n.jsx)("button",{onClick:()=>e.back(),style:{position:"absolute",top:"10px",left:"10px",padding:"6px 12px",background:"#e5e7eb",borderRadius:"6px",fontSize:"14px",border:"1px solid #d1d5db",cursor:"pointer"},children:"← Kembali"})}},6164:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(7437),a=r(2265),i=r(1379);function l(e){let{service:t}=e,[r,l]=(0,a.useState)(!1),[o,s]=(0,a.useState)(0),[c,d]=(0,a.useState)("-"),[u,p]=(0,a.useState)([]),[g,h]=(0,a.useState)(""),m=()=>{let e=JSON.parse(localStorage.getItem("queue_history")||"[]"),r=JSON.parse(localStorage.getItem("queue_called")||"[]"),n=new Set(r.map(e=>e.code));s(e.filter(e=>e.service===t&&!n.has(e.code)).length);let a=r.filter(e=>e.service===t).slice(-1)[0];d(a?a.code:"-")};(0,a.useEffect)(()=>(l(!0),m(),window.electronAPI&&window.electronAPI.getPrinters().then(e=>{p(e);let t=e.find(e=>e.isDefault);t&&h(t.name)}),window.addEventListener("storage",m),window.addEventListener(i.m,m),()=>{window.removeEventListener("storage",m),window.removeEventListener(i.m,m)}),[t]);let x=async()=>{if(!window.electronAPI)return alert("Fitur print hanya tersedia di aplikasi desktop");let e=JSON.parse(localStorage.getItem("queue_history")||"[]"),r=new Set(JSON.parse(localStorage.getItem("queue_called")||"[]").map(e=>e.code)),n=e.filter(e=>e.service===t&&!r.has(e.code));if(!n.length)return alert("Tidak ada antrian untuk ".concat(t));let a=n[0];if(!g)return alert("Pilih printer thermal terlebih dahulu");let i=await window.electronAPI.printThermal(a.code,t,g);i.success?alert("Tiket ".concat(a.code," berhasil dicetak ke printer thermal!")):alert("Gagal print: ".concat(i.error))};return r?(0,n.jsxs)("div",{className:"service-card",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:{fontWeight:700},children:["Layanan ",t]}),(0,n.jsxs)("div",{style:{marginTop:6,fontSize:20,color:"#334155"},children:["Terakhir dipanggil: ",(0,n.jsx)("strong",{children:c})]}),(0,n.jsxs)("div",{style:{marginTop:8,color:"#64748b"},children:["Menunggu: ",o]}),u.length>0&&(0,n.jsxs)("div",{style:{marginTop:12},children:[(0,n.jsx)("label",{style:{fontSize:13,color:"#64748b",display:"block",marginBottom:4},children:"Printer Thermal:"}),(0,n.jsxs)("select",{value:g,onChange:e=>h(e.target.value),style:{padding:"6px 10px",borderRadius:6,border:"1px solid #cbd5e1",fontSize:14,width:"100%"},children:[(0,n.jsx)("option",{value:"",children:"Pilih Printer"}),u.map(e=>(0,n.jsxs)("option",{value:e.name,children:[e.name," ",e.isDefault?"(Default)":""]},e.name))]})]})]}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[(0,n.jsx)("button",{onClick:()=>{let e=JSON.parse(localStorage.getItem("queue_history")||"[]"),r=JSON.parse(localStorage.getItem("queue_called")||"[]"),n=new Set(r.map(e=>e.code)),a=e.filter(e=>e.service===t&&!n.has(e.code));if(!a.length)return alert("Tidak ada antrian untuk ".concat(t));let l=a[0];r.push({...l,ts:Date.now()}),localStorage.setItem("queue_called",JSON.stringify(r)),localStorage.setItem("queue_current",l.code),(0,i.L)(),alert("Memanggil ".concat(l.code))},className:"btn btn-green",children:"Panggil Berikutnya"}),u.length>0&&(0,n.jsx)("button",{onClick:x,className:"btn",style:{background:"#8b5cf6",color:"white"},children:"\uD83D\uDDA8️ Print Thermal"})]})]}):(0,n.jsx)("div",{className:"service-card",children:"Loading..."})}},3375:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var n=r(7437),a=r(6164),i=r(7258),l=r(1379);function o(){return(0,n.jsxs)("div",{style:{maxWidth:"760px",margin:"40px auto",background:"rgba(255,255,255,0.85)",backdropFilter:"blur(6px)",padding:"28px",borderRadius:"20px",boxShadow:"0 12px 30px rgba(2,6,23,0.06)",border:"1px solid rgba(255,255,255,0.6)",paddingTop:"45px"},children:[(0,n.jsx)(i.Z,{}),(0,n.jsx)("h2",{style:{fontSize:"32px",margin:"0 0 6px 0",color:"#064e3b"},children:"Panel Petugas"}),(0,n.jsx)("p",{style:{color:"#6b7280"},children:"Kelola dan panggil nomor antrian"}),(0,n.jsx)("button",{onClick:()=>{localStorage.removeItem("queue_last_A"),localStorage.removeItem("queue_current"),localStorage.removeItem("queue_history"),localStorage.removeItem("queue_called"),(0,l.L)(),alert("Semua antrian berhasil direset.")},style:{marginTop:15,marginBottom:20,padding:"10px 16px",background:"#ef4444",color:"white",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600},children:"\uD83D\uDD04 Reset Semua Antrian"}),(0,n.jsx)("div",{style:{marginTop:18,display:"grid",gap:12},children:(0,n.jsx)(a.Z,{service:"A"})})]})}},1379:function(e,t,r){"use strict";r.d(t,{L:function(){return a},m:function(){return n}});let n="queue-updated";function a(){window.dispatchEvent(new Event(n))}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=5575)}),_N_E=e.O()}]);