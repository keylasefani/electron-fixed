(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[936],{5575:function(e,t,r){Promise.resolve().then(r.bind(r,3375))},7258:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(7437),a=r(1169);function i(){let e=(0,a.useRouter)();return(0,n.jsx)("button",{onClick:()=>e.back(),style:{position:"absolute",top:"10px",left:"10px",padding:"6px 12px",background:"#e5e7eb",borderRadius:"6px",fontSize:"14px",border:"1px solid #d1d5db",cursor:"pointer"},children:"← Kembali"})}},6164:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(7437),a=r(2265),i=r(1379);function o(e){let{service:t}=e,[r,o]=(0,a.useState)(!1),[l,s]=(0,a.useState)(0),[c,d]=(0,a.useState)("-"),[u,p]=(0,a.useState)([]),[g,h]=(0,a.useState)(""),m=()=>{let e=JSON.parse(localStorage.getItem("queue_history")||"[]"),r=JSON.parse(localStorage.getItem("queue_called")||"[]"),n=new Set(r.map(e=>e.code));s(e.filter(e=>e.service===t&&!n.has(e.code)).length);let a=r.filter(e=>e.service===t).slice(-1)[0];d(a?a.code:"-")};(0,a.useEffect)(()=>(o(!0),m(),window.electronAPI&&window.electronAPI.getPrinters().then(e=>{let t=e.filter(e=>0===e.status||void 0===e.status||!e.status);p(t);let r=t.find(e=>e.isDefault);r?h(r.name):t.length>0&&h(t[0].name)}).catch(e=>{console.error("Error loading printers:",e)}),window.addEventListener("storage",m),window.addEventListener(i.m,m),()=>{window.removeEventListener("storage",m),window.removeEventListener(i.m,m)}),[t]);let x=async()=>{if(!window.electronAPI)return alert("Fitur print hanya tersedia di aplikasi desktop");let e=JSON.parse(localStorage.getItem("queue_history")||"[]"),r=new Set(JSON.parse(localStorage.getItem("queue_called")||"[]").map(e=>e.code)),n=e.filter(e=>e.service===t&&!r.has(e.code));if(!n.length)return alert("Tidak ada antrian untuk ".concat(t));let a=n[0];if(!g)return alert("⚠️ Pilih printer thermal terlebih dahulu!\n\nPastikan printer sudah terhubung dan terdeteksi di dropdown.");try{let e=await window.electronAPI.printThermal({queueCode:a.code,service:t,printerName:g});e.success?alert("✅ Tiket ".concat(a.code," berhasil dicetak ke printer:\n").concat(g)):alert("❌ Gagal print ke ".concat(g,":\n").concat(e.error))}catch(e){alert("❌ Error saat print: ".concat(e.message))}};return r?(0,n.jsxs)("div",{className:"service-card",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{style:{fontWeight:700},children:["Layanan ",t]}),(0,n.jsxs)("div",{style:{marginTop:6,fontSize:20,color:"#334155"},children:["Terakhir dipanggil: ",(0,n.jsx)("strong",{children:c})]}),(0,n.jsxs)("div",{style:{marginTop:8,color:"#64748b"},children:["Menunggu: ",l]}),u.length>0?(0,n.jsxs)("div",{style:{marginTop:12},children:[(0,n.jsxs)("label",{style:{fontSize:13,color:"#64748b",display:"block",marginBottom:4},children:["Printer Thermal (",u.length," terdeteksi):"]}),(0,n.jsxs)("select",{value:g,onChange:e=>h(e.target.value),style:{padding:"6px 10px",borderRadius:6,border:"1px solid #cbd5e1",fontSize:14,width:"100%"},children:[(0,n.jsx)("option",{value:"",children:"-- Pilih Printer --"}),u.map(e=>(0,n.jsxs)("option",{value:e.name,children:[e.name," ",e.isDefault?"⭐ (Default)":""]},e.name))]})]}):(0,n.jsx)("div",{style:{marginTop:12,padding:"8px 12px",background:"#fef3c7",borderRadius:6,fontSize:13,color:"#92400e"},children:"⚠️ Tidak ada printer terdeteksi. Pastikan printer sudah terhubung."})]}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[(0,n.jsx)("button",{onClick:()=>{let e=JSON.parse(localStorage.getItem("queue_history")||"[]"),r=JSON.parse(localStorage.getItem("queue_called")||"[]"),n=new Set(r.map(e=>e.code)),a=e.filter(e=>e.service===t&&!n.has(e.code));if(!a.length)return alert("Tidak ada antrian untuk ".concat(t));let o=a[0];r.push({...o,ts:Date.now()}),localStorage.setItem("queue_called",JSON.stringify(r)),localStorage.setItem("queue_current",o.code),(0,i.L)(),alert("Memanggil ".concat(o.code))},className:"btn btn-green",children:"Panggil Berikutnya"}),u.length>0&&(0,n.jsx)("button",{onClick:x,className:"btn",style:{background:"#8b5cf6",color:"white"},children:"\uD83D\uDDA8️ Print Thermal"})]})]}):(0,n.jsx)("div",{className:"service-card",children:"Loading..."})}},3375:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var n=r(7437),a=r(6164),i=r(7258),o=r(1379);function l(){return(0,n.jsxs)("div",{style:{maxWidth:"760px",margin:"40px auto",background:"rgba(255,255,255,0.85)",backdropFilter:"blur(6px)",padding:"28px",borderRadius:"20px",boxShadow:"0 12px 30px rgba(2,6,23,0.06)",border:"1px solid rgba(255,255,255,0.6)",paddingTop:"45px"},children:[(0,n.jsx)(i.Z,{}),(0,n.jsx)("h2",{style:{fontSize:"32px",margin:"0 0 6px 0",color:"#064e3b"},children:"Panel Petugas"}),(0,n.jsx)("p",{style:{color:"#6b7280"},children:"Kelola dan panggil nomor antrian"}),(0,n.jsx)("button",{onClick:()=>{localStorage.removeItem("queue_last_A"),localStorage.removeItem("queue_current"),localStorage.removeItem("queue_history"),localStorage.removeItem("queue_called"),(0,o.L)(),alert("Semua antrian berhasil direset.")},style:{marginTop:15,marginBottom:20,padding:"10px 16px",background:"#ef4444",color:"white",borderRadius:"8px",border:"none",cursor:"pointer",fontWeight:600},children:"\uD83D\uDD04 Reset Semua Antrian"}),(0,n.jsx)("div",{style:{marginTop:18,display:"grid",gap:12},children:(0,n.jsx)(a.Z,{service:"A"})})]})}},1379:function(e,t,r){"use strict";r.d(t,{L:function(){return a},m:function(){return n}});let n="queue-updated";function a(){window.dispatchEvent(new Event(n))}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=5575)}),_N_E=e.O()}]);